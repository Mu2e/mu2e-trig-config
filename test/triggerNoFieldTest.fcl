#------------------------------------------------------------------------------
# runs the trigger reco
#------------------------------------------------------------------------------
#  > mu2e --config mu2e-trig-config/test/triggerTest.fcl --source "your digis file" --TFile globalFilter.root --nevts=100
#include "Offline/fcl/minimalMessageService.fcl"
#include "Offline/fcl/standardServices.fcl"

#include "mu2e-trig-config/core/trigProducers.fcl"
#include "mu2e-trig-config/core/trigFilters.fcl"
#include "mu2e-trig-config/core/trigRecoSequences.fcl"
#include "mu2e-trig-config/core/trigSequences.fcl"

#include "mu2e-trig-config/gen/trig_noFieldMenuPSConfig_OnSpill.fcl"
#include "mu2e-trig-config/gen/trig_noFieldMenu_OnSpill.fcl"

process_name : NoFieldTrigger

# we don't need any simulation services for this job

services : @local::Services.Reco
services.GeometryService.bFieldFile     : "Offline/Mu2eG4/geom/bfgeom_reco_v01.txt"
source: { module_type: RootInput }
services.TFileService.fileName : "/dev/null"

services.scheduler.wantSummary: true
TrigRecoSequences.artFragmentsGen : [ @nil ]

physics : {

  @table::TrigSequences
  producers : { @table::TrigProducers.producers }
  filters   : {
    @table::TrigFilters.filters
    @table::Trig_noFieldMenuPSConfig
    # Triggerable calo events
    TriggerableCalo : {
      module_type : CaloShowerSimFilter
      MinParticleEnergy : 75.0
      MinTotalEnergy    : 1e6
      CaloShowerSimCollection : "compressDigiMCs"
      particleTypes : [11, -11, 13, -13, 211, -211, 22]
    }
  }
  TriggerableCalo : [ TriggerableCalo ]
  EndPath : [ TriggerableOutput, TriggeredOutput ]
  trigger_paths : [ @sequence::Trig_noFieldMenu.trigger_paths, "25:TriggerableCalo" ]
  end_paths : [ EndPath ]
}

outputs : {
  TriggeredOutput : {
    module_type  : RootOutput
    SelectEvents : [ @sequence::Trig_noFieldMenu.trigger_list ]
    fileName     : "dig.owner.Triggered.noFieldMenu.sequencer.art"
  }
  TriggerableOutput : {
    module_type  : RootOutput
    SelectEvents : [ TriggerableCalo ]
    fileName     : "dig.owner.Triggerable.noFieldMenu.sequencer.art"
  }
}

#include "mu2e-trig-config/core/trigDigiInputsEpilog.fcl"
#include "Production/Validation/database.fcl"
#include "Production/JobConfig/reco/drop_trigger.fcl"
